apply plugin: 'maven-publish'
apply plugin: 'signing'

ext.isReleaseVersion = !version.endsWith("SNAPSHOT")

java {
    withJavadocJar()
    withSourcesJar()
}

publishing {
    publications {
        maven(MavenPublication) {
            from components.java

            apply from: rootProject.file('pom.gradle')
            pom(pomData)
        }
    }
    tasks.withType(Sign) {
        onlyIf { isReleaseVersion }
    }
    signing {
        useGpgCmd()
        sign publishing.publications.maven
    }
}